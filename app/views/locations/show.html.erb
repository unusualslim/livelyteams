<h1><%= @location.short_name %> <small><%= @location.name %></small></h1>


<h2>Cases</h2>
<table class="table table-striped table-hover table-responsive">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Subject</th>
      <th scope="col">Location</th>
      <th scope="col">Requested By</th>
      <th scope="col">Status</th>
      <th scope="col">Severity</th>
      <th scope="col" colspan="1"></th>
    </tr>
  </thead>

  <tbody>
  <% @location_support_cases.each do |support_case| %>
    <tr scope="row">
      <td><%= link_to support_case.id, support_case_path(support_case) %></td>
      <td><%= support_case.subject %></td>
      <td><%= support_case.location.short_name unless support_case.location.blank? %></td>
      <td><%= support_case.user.email unless support_case.user.blank? %></td>
      <td><%= support_case.status.status unless support_case.status.blank? %></td>
      <td><%= support_case.severity.severity unless support_case.severity.blank? %></td>
      <td><%= link_to 'Edit', edit_support_case_path(support_case) %></td>
    </tr>
  <% end %>
  </tbody>
</table>



<br>
<h2>Assets</h2>
<% @location.assets.each do |asset| %>
     <p><%= link_to asset.id, asset_path(asset.id) %></p>
     <p><strong>Manufacturer: </strong><%= asset.equipment.manufacturer.name %></p>
     <p><strong>Model: </strong><%= asset.equipment.model %></p>
     <p><strong>Tags:</strong></p>
     <%= render asset.taggings %>
     <%= link_to 'Delete Asset', [asset.location, asset],
       method: :delete,
       data: { confirm: 'Are you sure?'} %>
<% end %>

<h2>Add an Asset:</h2>
<%= form_with(model: [ @location, @location.assets.build ], local: true) do |form| %>
  <p>
    <%= form.label :equipment %><br>
    <%= form.collection_select :equipment_id, Equipment.all, :id, :model, prompt: true %>
  </p>
  <p>
    <%= form.submit %>
  </p>
<% end %>


